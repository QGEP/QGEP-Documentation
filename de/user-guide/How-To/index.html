<!DOCTYPE html>
<html class="writer-html5" lang="de" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.8. How To &mdash; QGEP 0.8 Dokumentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/translations.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Stichwortverzeichnis" href="../../genindex.html" />
    <link rel="search" title="Suche" href="../../search.html" />
    <link rel="next" title="4. Administratorhandbuch" href="../../admin-guide/index.html" />
    <link rel="prev" title="3.7.1. Verlaufsanzeige (History viewer)" href="../history/history.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> QGEP
          </a>
              <div class="version">
                0.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Dokumentation durchsuchen" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../features-guide/index.html">1. TEKSI-Modul ABWASSER &amp; GEP / QGEP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation-guide/index.html">2. Leitfaden QGEP Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">3. QGEP Benutzerhandbuch</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../layerexplanations/index.html">3.1. Übersicht über QGEP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../digitizing/index.html">3.2. Digitalisieren in QGEP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../editing/index.html">3.3. Bearbeiten in QGEP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../length-profile/index.html">3.4. Längsschnitte</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network-following/index.html">3.5. Werkzeuge zur Netzwerkverfolgung</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plan-plotting/index.html">3.6. Plandruck</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/index.html">3.7. History in QGEP</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.8. How To</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#manual-label-positioning-for-different-scales">3.8.1. Manuelle Beschriftungspositionen für unterschiedliche Massstäbe</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-import-existing-label-positions">3.8.2. Importieren von bestehenden Beschriftungspositionen</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-translate-a-label-prefix">3.8.3. Übersetzen von Beschriftungs-Prefix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#collecting-a-hydr-geometry-corresponds-to-a-basin-geometry-in-mikeurban">3.8.4. Erfassen einer Hydr_Geometrie (entspricht einer Beckengeometrie in MikeUrban)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hydraulic-modeling-of-an-overflow-prank-weir-leapingweir-pump">3.8.5. Hydraulische Modellierung eines Überlaufes (Streichwehr/Leapingwehr/Förderanlage)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#overflow-characteristic">3.8.6. Überlaufcharakteristik</a></li>
<li class="toctree-l3"><a class="reference internal" href="#further-informations">3.8.7. Weitere Infos</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">4. Administratorhandbuch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vm/index.html">5. Demo virtuelle Maschine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wincan2qgep/index.html">6. Wincan 2 QGEP plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qgep_swmm/index.html">7. QGEP SWMM plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../translation/index.html">8. Übersetzungen</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QGEP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html"><span class="section-number">3. </span>QGEP Benutzerhandbuch</a></li>
      <li class="breadcrumb-item active"><span class="section-number">3.8. </span>How To</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/user-guide/How-To/index.rst.txt" rel="nofollow"> Quelltext anzeigen</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="how-to">
<h1><span class="section-number">3.8. </span>How To<a class="headerlink" href="#how-to" title="Permalink to this heading"></a></h1>
<p>Eine Anleitung zu verschiedenen Themen um die Konfiguration von QGEP.</p>
<section id="manual-label-positioning-for-different-scales">
<h2><span class="section-number">3.8.1. </span>Manuelle Beschriftungspositionen für unterschiedliche Massstäbe<a class="headerlink" href="#manual-label-positioning-for-different-scales" title="Permalink to this heading"></a></h2>
<p>In QGIS können verschiedene Beschriftungsdefinitionen für verschiedene Massstäbe definiert werden. Bei der Arbeit am Bildschirm funktioniert das gut. Aber soll ein Plan mit Beschriftung gedruckt oder ein Datenexport der Beschriftungen (z.B. für ins Regio-GIS) gemacht werden, ist es oft nötig, die Beschriftungspositionen manuell zu definieren. Wenn eine Beschriftung manuell platziert wird in QGIS, dann gilt diese fixe Position aber für jeden Massstab. Und das führt nicht immer zu guten Resultaten.</p>
<p>Lösung</p>
<ul class="simple">
<li><p>Erweitern der Hilfsspeichertabellen (Auxiliary Storage) mit neuen Feldern für verschiedene Beschriftungspositionen</p></li>
<li><p>Regelbasierte Beschriftungen verwenden, dann kann für jede Regel eine unterschiedliche Beschriftungsposition definiert werden</p></li>
</ul>
<p>Im untenstehenden Beispiel soll für die Abwasserbauwerke je eine Beschriftung für den Werkplan (1:500) und für den Übersichtsplan (1:2000) erstellt werden. In den Hilfsspeichertabellen benutzen wir die Standardfelder PositionX und PositionY für die Werkplan-Beschriftung. Für die Übersichtsplan-Beschriftung braucht es zwei neue Felder. Wir benennen sie posx2000 und posy2000.</p>
<figure class="align-default">
<img alt="../../_images/man_labeling_newfields.jpg" src="../../_images/man_labeling_newfields.jpg" />
</figure>
<p>Jetzt definieren wir zwei regelbasierte Beschriftungen. Im Beispiel heisst die erste Regel WP-Labels (WP=Werkplan). Bei der Platzierung muss nichts geändert werden, weil für die Regel die Standard Positionsfelder verwendet werden.</p>
<figure class="align-default">
<img alt="../../_images/man_labeling_rules.jpg" src="../../_images/man_labeling_rules.jpg" />
</figure>
<p>Die zweite Regel nennen wir UP-Labels (UP=Uebersichtsplan). In dieser Regel müssen die Koordinaten-Felder im Reiter Platzierung geändert werden.</p>
<figure class="align-default">
<img alt="../../_images/man_labeling_edit_rules.jpg" src="../../_images/man_labeling_edit_rules.jpg" />
</figure>
<figure class="align-default">
<img alt="../../_images/man_labeling_coordinatefield.jpg" src="../../_images/man_labeling_coordinatefield.jpg" />
</figure>
<p>Klicke auf das Koordinate X - Menütool und wähle im Feldtype-Menü das Feld auxiliary_storage_user_custom_posx2000. Dann analog das gleiche für die Y Koordinate.</p>
<div class="admonition attention">
<p class="admonition-title">Achtung</p>
<p>Für die Definition des Koordinaten-Feldes darf nicht das <strong>Bearbeiten…</strong> Menü verwendet werden. Wenn der Formel-Editor verwendet wird oder das Feld mit dem Bearbeiten…-Menü bestimmt wird, wird QGIS die Auswahl jedesmal überschreiben, wenn eine manuelle Positionierung verwendet wird.</p>
</div>
<p>Jetzt können mit dem QGIS Tool <strong>Verschiebt Beschriftung oder Diagramm</strong> die Beschriftungen für jede Regel unterschiedlich positioniert werden.</p>
<figure class="align-default">
<img alt="../../_images/man_labeling_labeltools.jpg" src="../../_images/man_labeling_labeltools.jpg" />
</figure>
<div class="admonition attention">
<p class="admonition-title">Achtung</p>
<p>Die Änderungen werden nur gespeichert, wenn das QGIS-Projekt gespeichert wird!</p>
</div>
</section>
<section id="how-to-import-existing-label-positions">
<h2><span class="section-number">3.8.2. </span>Importieren von bestehenden Beschriftungspositionen<a class="headerlink" href="#how-to-import-existing-label-positions" title="Permalink to this heading"></a></h2>
<p>In guten Beschriftungspositionen kann viel Arbeit stecken. Diese Arbeit soll nicht verloren gehen.</p>
<ul class="simple">
<li><p>Exportieren der Beschriftungsposition im alten GIS in der Form Obj_ID, KoordinateX(Ost), KoordinateY(Nord).</p></li>
<li><p>Füge das**.qgd**-File vom aktuellen Projekt mit <strong>Vektorlayer hinzufügen…</strong> im Projekt ein und öffne die Attributtabelle.</p></li>
</ul>
<figure class="align-default">
<img alt="../../_images/man_labeling_auxtable.jpg" src="../../_images/man_labeling_auxtable.jpg" />
</figure>
<p>Wenn noch kein .qgd-File vorhanden ist, dann wurde vermutlich noch nie in diesem Projekt eine Beschriftung manuell verschoben oder gedreht.</p>
<ul class="simple">
<li><p>Ändere die Feldnamen in der Exportdatei in die Feldnamen aus der .qgd-Datei. Im Beispiel muss dass Obj_ID-Feld den Namen <strong>ASPK</strong> haben, die Koordinaten-Felder müssen <strong>labeling_positionx</strong> und <strong>labeling_positiony</strong> heissen.</p></li>
<li><p>Öffne das Export-File im QGIS-Projekt und kopiere die gewünschten Zeilen in die Tabelle der qgd-Datei (diese Tabelle muss editierbar sein).</p></li>
<li><p>Speichere das qgd-File und lösche es aus dem Projekt, bevor Beschriftungen verschoben werden, weil QGIS nicht manuelle Beschriftungs-Positionen sichern kann, solange das qgd-File als Layer im Projekt geöffnet ist.</p></li>
<li><p>Falls notwendig definiere die Ausrichtung horizontal und vertikal der Beschriftungen im Platzierungs-Reiter der Beschriftungsdefinition.</p></li>
</ul>
</section>
<section id="how-to-translate-a-label-prefix">
<h2><span class="section-number">3.8.3. </span>Übersetzen von Beschriftungs-Prefix<a class="headerlink" href="#how-to-translate-a-label-prefix" title="Permalink to this heading"></a></h2>
<p>QGEP erstellt automatisch Beschriftungen für Abwasserbauwerke und Haltungen:</p>
<figure class="align-default">
<img alt="../../_images/qgep_labels.png" src="../../_images/qgep_labels.png" />
</figure>
<p>Um die Kurzeichen in den Beschriftungen zu übersetzen sind im QGIS-Projekt entsprechende Variablen definiert. Um die Buchstaben für Deckel-Koten, Sohlenkoten und Ein- und Auslaufkoten zu ändern, müssen diese Projekt-Einstellungen geändert werden:</p>
<figure class="align-default">
<img alt="../../_images/qgep_label_prefix_settings.png" src="../../_images/qgep_label_prefix_settings.png" />
</figure>
</section>
<section id="collecting-a-hydr-geometry-corresponds-to-a-basin-geometry-in-mikeurban">
<h2><span class="section-number">3.8.4. </span>Erfassen einer Hydr_Geometrie (entspricht einer Beckengeometrie in MikeUrban)<a class="headerlink" href="#collecting-a-hydr-geometry-corresponds-to-a-basin-geometry-in-mikeurban" title="Permalink to this heading"></a></h2>
<p>Hinweis:</p>
<ul class="simple">
<li><p>Schächte mit einer Hydr_Geometrie sind als Spezialbauwerke (und nicht als Normschächte) zu erfassen.</p></li>
<li><p>Die Schachtgeometrie kann graphisch mit <strong>Aktion Digitize</strong> gezeichnet werden.</p></li>
</ul>
<p>Vorgehen:</p>
<ol class="arabic simple">
<li><p>Abwasserbauwerk mit i-Knopf auswählen</p></li>
<li><p>Im Fenster Objektattribute den Reiter Abwasserknoten wählen</p></li>
<li><p>Im Feld fs_Hydr_Geometrie eine Beckengeometrie wählen oder mit dem + Knopf eine neue Hydr_Geometrie erstellen.</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/hydr_geometry1.jpg" src="../../_images/hydr_geometry1.jpg" />
</figure>
<ol class="arabic simple" start="4">
<li><p>Im Fenster Hydr-Geometrie – Objektattribute eine Bezeichnung erfassen. Diese Bezeichnung ist auch die Bezeichnung der Tabelle in MikeUrban.</p></li>
<li><p>Bevor ein hydr:geom_relation erfasst werden kann, muss der neue Datensatz Hydro_Geometrie gespeichert werden: -&gt; OK klicken</p></li>
<li><p>Mit dem Knopf <strong>auf Formularansicht umschalten</strong> beim Feld fs_Hydr_Geometrie wieder zurück zur eben erstellten Hydr_Geometrie</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/hydr_geometry2.jpg" src="../../_images/hydr_geometry2.jpg" />
</figure>
<ol class="arabic simple" start="7">
<li><p>Mit dem <strong>Kindobjekt hinzufügen</strong> Knopf können nun die Datensätze erzeugt werden, mit denen die Beckengeometrie analog der Beckengeometrie von MikeUrban (H, As Oberfläche, Ac Querschnittsfläche) definiert wird.</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/hydr_geometry3.jpg" src="../../_images/hydr_geometry3.jpg" />
</figure>
<p>Hinweis:</p>
<ul class="simple">
<li><p>Als Wassertiefe ist der Werte über der Sohlenkote resp. dem Auslauf anzugeben. Eine Beckengeometrie kann so bei gleichen Schächten für mehrere Schächte verwendet werden.</p></li>
<li><p>In der Tabellendarstellung ist der Überblick über die Werte einfacher.</p></li>
</ul>
</section>
<section id="hydraulic-modeling-of-an-overflow-prank-weir-leapingweir-pump">
<h2><span class="section-number">3.8.5. </span>Hydraulische Modellierung eines Überlaufes (Streichwehr/Leapingwehr/Förderanlage)<a class="headerlink" href="#hydraulic-modeling-of-an-overflow-prank-weir-leapingweir-pump" title="Permalink to this heading"></a></h2>
<p>Vorgehen:</p>
<p>Bei Wehren ist ein zweiter Abwasserknoten im Bauwerk zu erstellen. Ein zweiter Auslauf ist bereits erstellt (grün = entlastetes Mischabwasser) und beim Überlaufbauwerk noch mit keinem Abwasserknoten verknüpft.</p>
<ol class="arabic simple">
<li><p>Abwasserbauwerk mit i-Knopf auswählen</p></li>
<li><p>Im Fenster Objektattribute den Reiter Abwasserknoten wählen</p></li>
<li><p>Mit dem <strong>Punktkindobjekt hinzufügen</strong> Knopf kann ein zweiter Abwasserknoten erzeugt werden. Der hellblaue Hinweis oben in der Karte sagt, was zu tun ist!</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/overflow1.jpg" src="../../_images/overflow1.jpg" />
</figure>
<ol class="arabic simple" start="4">
<li><p>Mit Klick beim Auslauf 2 wird der zweite Abwasserknoten platziert.</p></li>
<li><p>Es erscheint das Eingabefenster für diesen Abwasserknoten. Es ist eine sinnvolle Bezeichnung zu wählen (zB. BSP001-AK2 für Abwasserknoten 2 des Schachtes BSP001). Diese Bezeichnung erscheint auch in MikeUrban. Mit OK wird der neue Abwasserknoten gespeichert.</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/overflow2.jpg" src="../../_images/overflow2.jpg" />
</figure>
<p>Im nächsten Bild ist der 2. Knoten in der Karte und im Objektattribute-Fenster gelb markiert.</p>
<figure class="align-default">
<img alt="../../_images/overflow3.jpg" src="../../_images/overflow3.jpg" />
</figure>
<p>Wir definieren jetzt ein Streichwehr:</p>
<ol class="arabic simple" start="6">
<li><p>Bei den Überlauf-Reitern wählen wir Streichwehr</p></li>
<li><p>Mit dem <strong>Kindobjekt hinzufügen</strong> Knopf erzeugen wir ein Streichwehr</p></li>
</ol>
<p>Es öffnet das Streichwehr Objektattribute Fenster. Die Attribute im oberen Teil Hydraulik sind auszufüllen, sie werden in MikeUrban übernommen.
Das Feld fs_UeberlaufNach muss manuell ausgefüllt werden. Die Obj_ID des zuvor erstellten zweiten Abwasserknoten ist im hinteren Fenster ersichtlich</p>
<figure class="align-default">
<img alt="../../_images/overflow4.jpg" src="../../_images/overflow4.jpg" />
</figure>
<p>Für die Berechnung in MikeUrban mit der Wehrformel sind diese Angaben ausreichend.</p>
<p>Jetzt muss nur noch der 2. Auslauf mit dem 2. Abwasserknoten verknüpft werden:</p>
<p>Alle offenen Objektattribute Fenster schliessen.</p>
<ol class="arabic simple">
<li><p>Das QGEP-Werkzeug <strong>Connect wastewater networkelements</strong> wählen.</p></li>
<li><p>Klick auf der Haltung beim Auslauf</p></li>
<li><p>Klick auf dem Abwasserknoten</p></li>
<li><p>Bestätigen, dass die Verknüpfung für den <strong>von Haltungspunkt</strong> erstellt wird</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/connect_2_node.jpg" src="../../_images/connect_2_node.jpg" />
</figure>
</section>
<section id="overflow-characteristic">
<h2><span class="section-number">3.8.6. </span>Überlaufcharakteristik<a class="headerlink" href="#overflow-characteristic" title="Permalink to this heading"></a></h2>
<p>Bei einem Leaping-Wehr, einem Förderaggregat oder bei speziellen Verhältnissen kann bei einem Überlauf eine Überlaufcharakteristik definiert werden:</p>
<p>Beim Feld fs_Ueberlaufcharakteristik kann eine bereits vorhandene Charakteristik gewählt werden oder eine Neue erstellt werden mit dem grünen + Knopf.</p>
<p>Es erscheint das Objektattribute Fenster für die Ueberlaufcharakteristik:</p>
<figure class="align-default">
<img alt="../../_images/overflow_char1.jpg" src="../../_images/overflow_char1.jpg" />
</figure>
<ol class="arabic simple">
<li><p>Auch hier wird die Bezeichnung später in MikeUrban übernommen als Tabellenbezeichnung für eine QH-Beziehung, welche z.B. in einer lokalen Steuerung benutzt wird.</p></li>
<li><p>Weil der Datensatz Überlaufcharakteristik noch nicht gesichert ist, muss er zuerst mit OK gespeichert werden, bevor die Datensätze der HQ-Relation erstellt werden können.</p></li>
<li><p>Mit dem Knopf <strong>auf Formularansicht umschalten</strong> beim Feld <a href="#id1"><span class="problematic" id="id2">fs_</span></a> Ueberlaufcharakteristik wieder zurück zur eben erstellten Überlaufcharakteristik und mit dem <strong>Kindobjekt hinzufügen</strong> Knopf die notwendigen HQ oder QQ-Werte definieren.</p></li>
</ol>
</section>
<section id="further-informations">
<h2><span class="section-number">3.8.7. </span>Weitere Infos<a class="headerlink" href="#further-informations" title="Permalink to this heading"></a></h2>
<p>Weiter Q &amp; A’s gibt es hier: <a class="reference external" href="https://github.com/QGEP/QGEP/discussions/categories/q-a">QGEP Discussion section</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../history/history.html" class="btn btn-neutral float-left" title="3.7.1. Verlaufsanzeige (History viewer)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Zurück</a>
        <a href="../../admin-guide/index.html" class="btn btn-neutral float-right" title="4. Administratorhandbuch" accesskey="n" rel="next">Weiter <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, The QGEP Project www.qgis.ch/en/projects/qgep-waste-water-module.</p>
  </div>

  Erstellt mit <a href="https://www.sphinx-doc.org/">Sphinx</a> mit einem
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    bereitgestellt von <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>