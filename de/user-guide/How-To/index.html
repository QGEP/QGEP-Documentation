<!DOCTYPE html>
<html class="writer-html5" lang="de" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2.8. How To &mdash; QGEP 0.8 Dokumentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/translations.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Stichwortverzeichnis" href="../../genindex.html" />
    <link rel="search" title="Suche" href="../../search.html" />
    <link rel="next" title="3. Administratorhandbuch" href="../../admin-guide/index.html" />
    <link rel="prev" title="2.7.1. History viewer" href="../history/history.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> QGEP
          </a>
              <div class="version">
                0.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Dokumentation durchsuchen" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation-guide/index.html">1. Leitfaden QGEP Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">2. QGEP Benutzerhandbuch</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../layerexplanations/index.html">2.1. Übersicht über QGEP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../digitizing/index.html">2.2. Digitalisieren in QGEP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../editing/index.html">2.3. Bearbeiten in QGEP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../length-profile/index.html">2.4. Längsschnitte</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network-following/index.html">2.5. Werkzeuge zur Netzwerkverfolgung</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plan-plotting/index.html">2.6. Plandruck</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/index.html">2.7. History in QGEP</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2.8. How To</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#manual-label-positioning-for-different-scales">2.8.1. Manuelle Beschriftungspositionen für unterschiedliche Massstäbe</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-import-existing-label-positions">2.8.2. Importieren von bestehenden Beschriftungspositionen</a></li>
<li class="toctree-l3"><a class="reference internal" href="#collecting-a-hydr-geometry-corresponds-to-a-basin-geometry-in-mikeurban">2.8.3. Collecting a hydr_geometry (corresponds to a basin geometry in MikeUrban)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hydraulic-modeling-of-an-overflow-prank-weir-leapingweir-pump">2.8.4. Hydraulic modeling of an overflow (prank weir / leapingweir / pump)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#overflow-characteristic">2.8.5. Overflow characteristic</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">3. Administratorhandbuch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vm/index.html">4. Demo virtuelle Maschine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wincan2qgep/index.html">5. Wincan 2 QGEP plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qgep_swmm/index.html">6. QGEP SWMM plugin</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QGEP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html"><span class="section-number">2. </span>QGEP Benutzerhandbuch</a> &raquo;</li>
      <li><span class="section-number">2.8. </span>How To</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/user-guide/How-To/index.rst.txt" rel="nofollow"> Quelltext anzeigen</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="how-to">
<h1><span class="section-number">2.8. </span>How To<a class="headerlink" href="#how-to" title="Link zu dieser Überschrift"></a></h1>
<p>Eine Anleitung zu verschiedenen Themen um die Konfiguration von QGEP.</p>
<section id="manual-label-positioning-for-different-scales">
<h2><span class="section-number">2.8.1. </span>Manuelle Beschriftungspositionen für unterschiedliche Massstäbe<a class="headerlink" href="#manual-label-positioning-for-different-scales" title="Link zu dieser Überschrift"></a></h2>
<p>In QGIS können verschiedene Beschriftungsdefinitionen für verschiedene Massstäbe definiert werden. Bei der Arbeit am Bildschirm funktioniert das gut. Aber soll ein Plan mit Beschriftung gedruckt oder ein Datenexport der Beschriftungen (z.B. für ins Regio-GIS) gemacht werden, ist es oft nötig, die Beschriftungspositionen manuell zu definieren. Wenn eine Beschriftung manuell platziert wird in QGIS, dann gilt diese fixe Position aber für jeden Massstab. Und das führt nicht immer zu guten Resultaten.</p>
<p>Lösung</p>
<ul class="simple">
<li><p>Erweitern der Hilfsspeichertabellen (Auxiliary Storage) mit neuen Feldern für verschiedene Beschriftungspositionen</p></li>
<li><p>Regelbasierte Beschriftungen verwenden, dann kann für jede Regel eine unterschiedliche Beschriftungsposition definiert werden</p></li>
</ul>
<p>Im untenstehenden Beispiel soll für die Abwasserbauwerke je eine Beschriftung für den Werkplan (1:500) und für den Übersichtsplan (1:2000) erstellt werden. In den Hilfsspeichertabellen benutzen wir die Standardfelder PositionX und PositionY für die Werkplan-Beschriftung. Für die Übersichtsplan-Beschriftung braucht es zwei neue Felder. Wir benennen sie posx2000 und posy2000.</p>
<figure class="align-default">
<img alt="../../_images/man_labeling_newfields.jpg" src="../../_images/man_labeling_newfields.jpg" />
</figure>
<p>Jetzt definieren wir zwei regelbasierte Beschriftungen. Im Beispiel heisst die erste Regel WP-Labels (WP=Werkplan). Bei der Platzierung muss nichts geändert werden, weil für die Regel die Standard Positionsfelder verwendet werden.</p>
<figure class="align-default">
<img alt="../../_images/man_labeling_rules.jpg" src="../../_images/man_labeling_rules.jpg" />
</figure>
<p>Die zweite Regel nennen wir UP-Labels (UP=Uebersichtsplan). In dieser Regel müssen die Koordinaten-Felder im Reiter Platzierung geändert werden.</p>
<figure class="align-default">
<img alt="../../_images/man_labeling_edit_rules.jpg" src="../../_images/man_labeling_edit_rules.jpg" />
</figure>
<figure class="align-default">
<img alt="../../_images/man_labeling_coordinatefield.jpg" src="../../_images/man_labeling_coordinatefield.jpg" />
</figure>
<p>Klicke auf das Koordinate X - Menütool und wähle im Feldtype-Menü das Feld auxiliary_storage_user_custom_posx2000. Dann analog das gleiche für die Y Koordinate.</p>
<div class="admonition attention">
<p class="admonition-title">Achtung</p>
<p>Für die Definition des Koordinaten-Feldes darf nicht das <strong>Bearbeiten…</strong> Menü verwendet werden. Wenn der Formel-Editor verwendet wird oder das Feld mit dem Bearbeiten…-Menü bestimmt wird, wird QGIS die Auswahl jedesmal überschreiben, wenn eine manuelle Positionierung verwendet wird.</p>
</div>
<p>Jetzt können mit dem QGIS Tool <strong>Verschiebt Beschriftung oder Diagramm</strong> die Beschriftungen für jede Regel unterschiedlich positioniert werden.</p>
<figure class="align-default">
<img alt="../../_images/man_labeling_labeltools.jpg" src="../../_images/man_labeling_labeltools.jpg" />
</figure>
<div class="admonition attention">
<p class="admonition-title">Achtung</p>
<p>Die Änderungen werden nur gespeichert, wenn das QGIS-Projekt gespeichert wird!</p>
</div>
</section>
<section id="how-to-import-existing-label-positions">
<h2><span class="section-number">2.8.2. </span>Importieren von bestehenden Beschriftungspositionen<a class="headerlink" href="#how-to-import-existing-label-positions" title="Link zu dieser Überschrift"></a></h2>
<p>In guten Beschriftungspositionen kann viel Arbeit stecken. Diese Arbeit soll nicht verloren gehen.</p>
<ul class="simple">
<li><p>Exportieren der Beschriftungsposition im alten GIS in der Form Obj_ID, KoordinateX(Ost), KoordinateY(Nord).</p></li>
<li><p>Füge das**.qgd**-File vom aktuellen Projekt mit <strong>Vektorlayer hinzufügen…</strong> im Projekt ein und öffne die Attributtabelle.</p></li>
</ul>
<figure class="align-default">
<img alt="../../_images/man_labeling_auxtable.jpg" src="../../_images/man_labeling_auxtable.jpg" />
</figure>
<p>Wenn noch kein .qgd-File vorhanden ist, dann wurde vermutlich noch nie in diesem Projekt eine Beschriftung manuell verschoben oder gedreht.</p>
<ul class="simple">
<li><p>Ändere die Feldnamen in der Exportdatei in die Feldnamen aus der .qgd-Datei. Im Beispiel muss dass Obj_ID-Feld den Namen <strong>ASPK</strong> haben, die Koordinaten-Felder müssen <strong>labeling_positionx</strong> und <strong>labeling_positiony</strong> heissen.</p></li>
<li><p>Öffne das Export-File im QGIS-Projekt und kopiere die gewünschten Zeilen in die Tabelle der qgd-Datei (diese Tabelle muss editierbar sein).</p></li>
<li><p>Speichere das qgd-File und lösche es aus dem Projekt, bevor Beschriftungen verschoben werden, weil QGIS nicht manuelle Beschriftungs-Positionen sichern kann, solange das qgd-File als Layer im Projekt geöffnet ist.</p></li>
<li><p>Falls notwendig definiere die Ausrichtung horizontal und vertikal der Beschriftungen im Platzierungs-Reiter der Beschriftungsdefinition.</p></li>
</ul>
</section>
<section id="collecting-a-hydr-geometry-corresponds-to-a-basin-geometry-in-mikeurban">
<h2><span class="section-number">2.8.3. </span>Collecting a hydr_geometry (corresponds to a basin geometry in MikeUrban)<a class="headerlink" href="#collecting-a-hydr-geometry-corresponds-to-a-basin-geometry-in-mikeurban" title="Link zu dieser Überschrift"></a></h2>
<p>Note:</p>
<ul class="simple">
<li><p>Wastewater structures with a hydr_geometry have to be defined as special structures (and not as standard manholes).</p></li>
<li><p>The detail geometry can be graphically drawn with the <strong>Digitize action</strong>.</p></li>
</ul>
<p>Action:</p>
<ol class="arabic simple">
<li><p>Select the wastewater structure with the i-button</p></li>
<li><p>Select the wastewater nodes tab in the Feature Attributes window</p></li>
<li><p>Select a hydr_geometry in the fk_hydr_geometry field or use the + button to create a new hydr_geometry.</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/hydr_geometry1.jpg" src="../../_images/hydr_geometry1.jpg" />
</figure>
<ol class="arabic simple" start="4">
<li><p>Enter a description in the hydr_geometry - Feature Attributes window. This name is also the name of the table in MikeUrban.</p></li>
<li><p>Before you can create a hydr: geom_relation, the new record hydr_geometry must be saved: -&gt; click OK</p></li>
<li><p>Go back to the hydr_geometry you just created with the button <strong>switch to form view</strong> in the field fk_hydr_geometry .</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/hydr_geometry2.jpg" src="../../_images/hydr_geometry2.jpg" />
</figure>
<ol class="arabic simple" start="7">
<li><p>With the <strong>Add child object</strong> button, you can now generate the records with which the hydr_geometry is defined analogously to the basin geometry of MikeUrban (H, As surface, Ac cross-sectional area).</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/hydr_geometry3.jpg" src="../../_images/hydr_geometry3.jpg" />
</figure>
<p>Note:</p>
<ul class="simple">
<li><p>The water depth is the value above the bottom level or the outlet. A hydr_geometry can thus be used for several wastewater structure if they are built similar.</p></li>
<li><p>In the table view, the overview of the values is easier.</p></li>
</ul>
</section>
<section id="hydraulic-modeling-of-an-overflow-prank-weir-leapingweir-pump">
<h2><span class="section-number">2.8.4. </span>Hydraulic modeling of an overflow (prank weir / leapingweir / pump)<a class="headerlink" href="#hydraulic-modeling-of-an-overflow-prank-weir-leapingweir-pump" title="Link zu dieser Überschrift"></a></h2>
<p>Action:</p>
<p>In the case of weirs, a second sewage junction has to be created in the wastewater structure.
A second outlet has already been created (green = discharged combined wastewater) and has not yet been linked to any wastewater node in the overflow structure.</p>
<ol class="arabic simple">
<li><p>Select the wastewater structure with the i-button</p></li>
<li><p>Select the wastewater nodes tab in the Feature Attributes window</p></li>
<li><p>Create a second wastewater node with the <strong>Add point child object</strong> button. The light blue note at the top of the map tells you what to do!</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/overflow1.jpg" src="../../_images/overflow1.jpg" />
</figure>
<ol class="arabic simple" start="4">
<li><p>Click next to outlet 2 to place the second wastewater node.</p></li>
<li><p>The Feature Attributes window for this wastewater node appears. Enter a meaningful identifier (e.g. BSP001-WN2 for wastewater node 2 of the BSP001 special structure). This designation also appears in MikeUrban. The new wastewater node is saved with OK.</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/overflow2.jpg" src="../../_images/overflow2.jpg" />
</figure>
<p>In the next picture, the 2nd node is marked in yellow on the map and in the Feature Attributes window.</p>
<figure class="align-default">
<img alt="../../_images/overflow3.jpg" src="../../_images/overflow3.jpg" />
</figure>
<p>We define now a prank weir:</p>
<ol class="arabic simple" start="6">
<li><p>Choose prank weir in the overflow tabs</p></li>
<li><p>Create a weir with the <strong>Add child object</strong> button</p></li>
</ol>
<p>The prank weir Feature Attributes window opens. The attributes in the upper hydraulic section must be filled in, they will be transferred to MikeUrban.
The field fk_overflow_to must be filled manually. The Obj_ID of the previously created second wastewater node can be seen in the rear window.</p>
<figure class="align-default">
<img alt="../../_images/overflow4.jpg" src="../../_images/overflow4.jpg" />
</figure>
<p>This information is sufficient for the calculation in MikeUrban with the weir formula.</p>
<p>Now only the 2nd outlet has to be linked to the 2nd wastewater node:</p>
<p>Close all open Feature Attributes window.</p>
<ol class="arabic simple">
<li><p>Select the QGEP tool <strong>Connect wastewater networkelements</strong>.</p></li>
<li><p>Click on the reach near to the outlet</p></li>
<li><p>Click on the wastewater node</p></li>
<li><p>Confirm that the connection is created for the <strong>from reach point</strong>.</p></li>
</ol>
<figure class="align-default">
<img alt="../../_images/connect_2_node.jpg" src="../../_images/connect_2_node.jpg" />
</figure>
</section>
<section id="overflow-characteristic">
<h2><span class="section-number">2.8.5. </span>Overflow characteristic<a class="headerlink" href="#overflow-characteristic" title="Link zu dieser Überschrift"></a></h2>
<p>In the case of a leaping weir, a pump or under special conditions, an overflow characteristic can be defined for the overflow:</p>
<p>You can select an existing characteristic in the field fk_overflow_char or you creat a new one characteristic with the green + button.</p>
<p>The Feature Attributes window for the overflow characteristic appears:</p>
<figure class="align-default">
<img alt="../../_images/overflow_char1.jpg" src="../../_images/overflow_char1.jpg" />
</figure>
<ol class="arabic simple">
<li><p>Here too, the identifer is later adopted in MikeUrban as a table name for a QH relationship, which is used, for example, in a local controller.</p></li>
<li><p>Because the new record overflow characteristic has not yet been saved, it must first be saved with OK before the records of the HQ relation can be created.</p></li>
<li><p>Go back in the field fk_overflow characteristic of the just created overflow characteristic with the button <strong>switch to form view</strong> and define the necessary HQ or QQ values with the <strong>add child object</strong> button.</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../history/history.html" class="btn btn-neutral float-left" title="2.7.1. History viewer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Zurück</a>
        <a href="../../admin-guide/index.html" class="btn btn-neutral float-right" title="3. Administratorhandbuch" accesskey="n" rel="next">Weiter <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, The QGEP Project www.qgis.ch/en/projects/qgep-waste-water-module.</p>
  </div>

  Erstellt mit <a href="https://www.sphinx-doc.org/">Sphinx</a> mit einem
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    bereitgestellt von <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>