

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4. Setări stație de lucru &mdash; QGEP 0.8 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="QGEP 0.8 documentation" href="../index.html"/>
        <link rel="up" title="QGEP Installation Guide" href="index.html"/>
        <link rel="next" title="1. QGEP User Guide" href="../user-guide/index.html"/>
        <link rel="prev" title="3. Database initialization" href="database-initialization.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> QGEP
        

        
        </a>

        
          
          
            <div class="version">
              0.7
            </div>
          
        

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">QGEP Installation Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="requirements.html">1. Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="server.html">2. Setup database server</a></li>
<li class="toctree-l2"><a class="reference internal" href="database-initialization.html">3. Database initialization</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">4. Setări stație de lucru</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#database-configuration">4.1. Configurare baza de date</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#windows-pg-service">4.1.1. Windows pg_service</a></li>
<li class="toctree-l4"><a class="reference internal" href="#linux-pg-service">4.1.2. Linux pg_service</a></li>
<li class="toctree-l4"><a class="reference internal" href="#all-systems">4.1.3. Toate sistemele</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#install-qgis">4.2. Instalare QGIS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-qgep-plugin">4.3. Instalare plugin QGEP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-the-demo-project">4.4. Instalează proiectul demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-your-own-oid-in-the-project">4.5. Add your own OID in the project</a></li>
<li class="toctree-l3"><a class="reference internal" href="#working-with-more-than-one-database">4.6. Working with more than one database</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/index.html">1. QGEP User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">2. Admin Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vm/index.html">3. Mașină Virtuală de Demo</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">QGEP</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">QGEP Installation Guide</a> &raquo;</li>
      
    <li>4. Setări stație de lucru</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/installation-guide/workstation.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="setup-workstation">
<h1>4. Setări stație de lucru<a class="headerlink" href="#setup-workstation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="database-configuration">
<h2>4.1. Configurare baza de date<a class="headerlink" href="#database-configuration" title="Permalink to this headline">¶</a></h2>
<p>Pentru a-i spune stației de lucru (de pe care lucrezi) unde este baza de date instalată, va trebui să creezi niște fișiere pe aceasta. Această operațiune este necesară pe fiecare stație de lucru/laptop etc. de pe care se va rula QGIS/QGEP. Operațiunea nu este necesară pe server.</p>
<p>Aceste instrucțiuni depind de sistemul de operare.</p>
<div class="section" id="windows-pg-service">
<h3>4.1.1. Windows pg_service<a class="headerlink" href="#windows-pg-service" title="Permalink to this headline">¶</a></h3>
<p>Creează un nou director acolo unde vrei să salvezi configurația. (De ex. un director <code class="docutils literal"><span class="pre">pgconfig</span></code> în directorul acasă). Acest director este descris în acest ghid de <code class="docutils literal"><span class="pre">PGSYSCONFDIR</span></code>.</p>
<p>Setează variabila de sistem <code class="docutils literal"><span class="pre">PGSYSCONFDIR</span></code> cu calea către <code class="docutils literal"><span class="pre">PGSYSCONFDIR</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Search for environment variable in your windows system settings, then click one of the following options, for either a user or a system variable:</p>
<blockquote>
<div>Click <code class="docutils literal"><span class="pre">New</span></code> to add a new variable name and value.
Click an existing variable, and then click <code class="docutils literal"><span class="pre">Edit</span></code> to change its name or value.
Click an existing variable, and then click <code class="docutils literal"><span class="pre">Delete</span></code> to remove it.</div></blockquote>
<div class="figure">
<img alt="../_images/umgebungsvariablen_pgconfdir.jpg" src="../_images/umgebungsvariablen_pgconfdir.jpg" />
</div>
<p class="last">You can check your environment variables also within QGIS: Menu <code class="docutils literal"><span class="pre">Settings</span></code> &#8211;&gt; <code class="docutils literal"><span class="pre">Options...</span></code> &#8211;&gt; <code class="docutils literal"><span class="pre">System</span></code> Tab  &#8211;&gt; <code class="docutils literal"><span class="pre">Environment</span></code></p>
</div>
<p>În acest director, vor fi două fișiere.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">pg_service.conf</span></code></li>
<li><p class="first"><code class="docutils literal"><span class="pre">pgpass</span></code> (opțional, dacă nu vrei sa introduci parola de fiecare dată)</p>
</li>
</ul>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">On Windows, you need to save <code class="docutils literal"><span class="pre">pg_service.conf</span></code> in Unix format in order to work.
One way to do it is to open it with <a class="reference external" href="https://notepad-plus-plus.org/">Notepad++</a>
and <code class="docutils literal"><span class="pre">Edit</span></code> &#8211;&gt; <code class="docutils literal"><span class="pre">EOL</span> <span class="pre">Conversion</span></code> &#8211;&gt; <code class="docutils literal"><span class="pre">UNIX</span> <span class="pre">Format</span></code> &#8211;&gt; <code class="docutils literal"><span class="pre">File</span> <span class="pre">save</span></code> .</p>
</div>
</div>
<div class="section" id="linux-pg-service">
<span id="pg-service-linux"></span><h3>4.1.2. Linux pg_service<a class="headerlink" href="#linux-pg-service" title="Permalink to this headline">¶</a></h3>
<p>On <a href="#id1"><span class="problematic" id="id2">*</span></a>nix systems (linux/macOS etc.) you may put the files <code class="docutils literal"><span class="pre">.pg_service.conf</span></code>
and <code class="docutils literal"><span class="pre">.pgpass</span></code> into your home folder (normally <code class="docutils literal"><span class="pre">/home/[username]</span></code>).</p>
</div>
<div class="section" id="all-systems">
<h3>4.1.3. Toate sistemele<a class="headerlink" href="#all-systems" title="Permalink to this headline">¶</a></h3>
<p>Introdu următoarele variabile în <code class="docutils literal"><span class="pre">pg_service.conf</span></code> sau <code class="docutils literal"><span class="pre">.pg_service.conf</span></code>. Variabilele introduse trebuie adaptate în funcție de topologia sistemului.</p>
<div class="code ini highlight-python"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">pg_qgep</span><span class="p">]</span>
<span class="n">host</span><span class="o">=</span><span class="n">localhost</span>
<span class="n">port</span><span class="o">=</span><span class="mi">5432</span>
<span class="n">dbname</span><span class="o">=</span><span class="n">qgep</span>
<span class="n">user</span><span class="o">=</span><span class="n">qgepuser</span>
</pre></div>
</div>
<p>Pentru a salva și parola în sistem se poate folosi fișierul <a class="reference external" href="http://www.postgresql.org/docs/current/static/libpq-pgpass.html">pgpass</a>.</p>
<div class="code ini highlight-python"><div class="highlight"><pre><span></span>localhost:5432:*:qgepuser:password
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Dacă baza de date nu e instalată pe stația de lucru locală atunci trebuie înlocuit <code class="docutils literal"><span class="pre">localhost</span></code> cu adresa de rețea a bazei de date, oriunde găsiți aceasta referință.</p>
</div>
</div>
</div>
<div class="section" id="install-qgis">
<h2>4.2. Instalare QGIS<a class="headerlink" href="#install-qgis" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Minimum requirement 3.4</li>
<li>We recommend using the latest master build (called qgis-dev on Windows)
which often offers a better experience in combination with QGEP.
For Windows installation, download the <a class="reference external" href="http://download.osgeo.org/osgeo4w/osgeo4w-setup-x86_64.exe">OSGeo4W Installer</a>
choose <em>advanced installation</em> and install qgis-dev.</li>
</ul>
</div>
<div class="section" id="install-qgep-plugin">
<h2>4.3. Instalare plugin QGEP<a class="headerlink" href="#install-qgep-plugin" title="Permalink to this headline">¶</a></h2>
<p>Plugin requirements:</p>
<ul class="simple">
<li>networkx &gt;= 2.1</li>
</ul>
<p>You can install them on debian based systems with:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>sudo pip install networkx
sudo apt-get install libqt4-sql-psql
</pre></div>
</div>
<ul class="simple">
<li><p class="first">Deschide QGIS</p>
</li>
<li>Go to <code class="docutils literal"><span class="pre">Plugins</span></code><ul>
<li><code class="docutils literal"><span class="pre">Manage</span> <span class="pre">and</span> <span class="pre">Install</span> <span class="pre">Plugins</span></code></li>
<li><code class="docutils literal"><span class="pre">Settings</span></code><ul>
<li><p class="first">Adaugă</p>
<ul>
<li><p class="first">Nume: QGEP</p>
</li>
<li>URL:
<code class="docutils literal"><span class="pre">https://raw.githubusercontent.com/QGEP/qgepplugin/master/plugins.xml?qgis=3.3</span></code></li>
</ul>
</li>
<li>Enable <code class="docutils literal"><span class="pre">Show</span> <span class="pre">also</span> <span class="pre">experimental</span> <span class="pre">plugins</span></code></li>
</ul>
</li>
<li><p class="first">Activează pluginul (a se vedea imaginea de mai jos)</p>
</li>
<li><p class="first">All - Toate</p>
<ul>
<li><p class="first">Caută  <cite>QGEP</cite></p>
</li>
<li><p class="first">Bifează căsuța de lîngă</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="figure" id="id3">
<img alt="../_images/001_searchplugin.jpeg" src="../_images/001_searchplugin.jpeg" />
<p class="caption"><span class="caption-text"><strong>Adaugă pluginul QGEP</strong></span></p>
</div>
</div>
<div class="section" id="install-the-demo-project">
<h2>4.4. Instalează proiectul demo<a class="headerlink" href="#install-the-demo-project" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Download from <a class="reference external" href="https://github.com/QGEP/datamodel/releases/latest">https://github.com/QGEP/datamodel/releases/latest</a>
New Restore file: qgep_vx.x.x_structure_and_demo_data.backup (with data), other versions with schema only available</li>
<li><p class="first">Extrage fișierul</p>
</li>
<li>Restore the file <cite>qgep_vx.x.x_structure_and_demo_data.backup</cite> with pgAdmin</li>
<li><p class="first">Deschide <cite>project/qgep_en.qgs</cite> cu QGIS</p>
</li>
</ul>
</div>
<div class="section" id="add-your-own-oid-in-the-project">
<h2>4.5. Add your own OID in the project<a class="headerlink" href="#add-your-own-oid-in-the-project" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>You have to add your OID data in the table qgep_sys.oid_prefixes:</li>
</ul>
<div class="figure">
<img alt="../_images/oid_prefix.jpg" src="../_images/oid_prefix.jpg" />
</div>
<ul class="simple">
<li>Edit <code class="docutils literal"><span class="pre">02_oid_generation.sql</span></code> with your OID if you want it permanently in the QGEP project and hand in a pull request</li>
</ul>
<p><a class="reference external" href="https://github.com/QGEP/datamodel/blob/master/02_oid_generation.sql">https://github.com/QGEP/datamodel/blob/master/02_oid_generation.sql</a></p>
<div class="code sql highlight-python"><div class="highlight"><pre><span></span>-- sample entry for the City of Uster - you need to add an entry for your own organization
INSERT INTO qgep_sys.oid_prefixes (prefix,organization,active) VALUES (&#39;ch11h8mw&#39;,&#39;Stadt Uster&#39;,TRUE);
INSERT INTO qgep_sys.oid_prefixes (prefix,organization,active) VALUES (&#39;ch15z36d&#39;,&#39;SIGE&#39;,FALSE);
INSERT INTO qgep_sys.oid_prefixes (prefix,organization,active) VALUES (&#39;ch13p7mz&#39;,&#39;Arbon&#39;,FALSE);
</pre></div>
</div>
<p>and set the OID you want to use in your project to TRUE.</p>
<ul class="simple">
<li>or add it locally to your project with an INSERT statement.</li>
<li>OID prefixes have to be ordered at <a class="reference external" href="http://www.interlis.ch/oid/oid_commande_e.php">http://www.interlis.ch/oid/oid_commande_e.php</a></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you work with different databases for different communities, you should use different OID prefixes for each database.</p>
</div>
</div>
<div class="section" id="working-with-more-than-one-database">
<h2>4.6. Working with more than one database<a class="headerlink" href="#working-with-more-than-one-database" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Create a new database in pgAdmin with a new name, e.g. communityA</li>
<li>Create a new schema qgep in this database (do not choose another name, because all scripts works with the schema-name qgep)</li>
<li>Go further on as described in 1.2 Database initialization</li>
<li>Change the <code class="docutils literal"><span class="pre">pg_service.conf</span></code> - file</li>
</ul>
<div class="code ini highlight-python"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">pg_qgep</span><span class="p">]</span>
<span class="n">host</span><span class="o">=</span><span class="n">localhost</span>
<span class="n">port</span><span class="o">=</span><span class="mi">5432</span>
<span class="n">dbname</span><span class="o">=</span><span class="n">qgep</span>
<span class="n">user</span><span class="o">=</span><span class="n">qgepuser</span>
<span class="p">[</span><span class="n">pg_communityA</span><span class="p">]</span>
<span class="n">host</span><span class="o">=</span><span class="n">localhost</span>
<span class="n">port</span><span class="o">=</span><span class="mi">5432</span>
<span class="n">dbname</span><span class="o">=</span><span class="n">communityA</span>
<span class="n">user</span><span class="o">=</span><span class="n">qgepuser</span>
</pre></div>
</div>
<ul class="simple">
<li>Search and replace in the copy of <code class="docutils literal"><span class="pre">qgep_en.qgs</span></code> all &#8216;pg_qgep&#8217; with &#8216;pg_communityA&#8217;</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../user-guide/index.html" class="btn btn-neutral float-right" title="1. QGEP User Guide" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="database-initialization.html" class="btn btn-neutral" title="3. Database initialization" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, The QGEP Project www.qgis.ch/en/projects/qgep-waste-water-module.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.8',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>